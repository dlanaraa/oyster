<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1"
    />
    <style>
      @font-face {
        font-family: "NanumBarunGothic";
        src: url("/fonts/NanumBarunGothic.eot");
        src: url("/fonts/NanumBarunGothic.eot") format("embedded-opentype"),
          url("/fonts/NanumBarunGothic.woff") format("woff");
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "NanumBarunGothinc", "sans-serif";
        line-height: 1.6;
        -ms-overflow-style: none;
        overflow-x: hidden;
        overflow-y: hidden;
        width: 100%;
        padding-bottom: 50px;
        background-color: white;
      }

      #section15 {
        margin-bottom: 50px;
        text-align: center;
      }

      .section15-container {
        display: flex;
        width: 100vw;
        height: 100%;
        flex-direction: row;
      }

      .section15-container .store-list {
        width: 25vw;
        padding: 25px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 30px;
      }

      .section15-container .store-list img {
        width: 100%;
      }

      .section15-container .store-list h3 {
        font-size: 1.8em;
        color: #11212e;
      }

      .store {
        background: #f8f8f8;
        border: 1px solid #ddd;
        padding: 12px;
        margin-bottom: 8px;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .store strong {
        color: red;
      }

      .store h2 {
        font-size: 1.2em;
      }

      .store p {
        font-size: 0.8em;
      }

      .store:hover {
        background: #e2e2e2;
      }

      .section15-container .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .pagination button {
        padding: 5px 10px;
        border: none;
        background-color: rgb(145, 145, 145);
        color: white;
        cursor: pointer;
        margin: 1px 6px;
      }

      .pagination #prevPage {
        margin-right: 20px;
      }

      .pagination #nextPage {
        margin-left: 20px;
      }

      #map {
        width: 75vw;
        height: calc(100vh - 100px);
      }

      .info-window {
        color: black;
        align-items: center;
        padding: 15px 10px;
        font-size: 14px;
        border-radius: 10px;
        width: 160px;
        height: 110px;
        margin-left: -5px;
        margin-top: -10px;
        background-color: white;
        border: 6px solid #248cfa;
        text-align: left;
      }

      .info-window::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-top: 10px solid #248cfa;
      }

      .info-window strong {
        font-size: 1.1em;
      }

      .info-window strong strong {
        font-size: 1em;
        color: red;
      }

      .info-window a {
        text-decoration: none;
        color: black;
        cursor: pointer;
      }

      .info-window a:hover {
        color: #248cfa;
      }
    </style>
  </head>
  <body>
    <section id="section15" class="page">
      <div class="section15-container">
        <div class="store-list">
          <div class="logo">
            <h3>ë§¤ì¥ ì°¾ê¸°</h3>
          </div>
          <div id="store-items"></div>
          <div class="pagination">
            <button id="prevPage">ì´ì „</button>
            <span id="currentPage">1</span> / <span id="totalPages"></span>
            <button id="nextPage">ë‹¤ìŒ</button>
          </div>
        </div>
        <div class="store-map" id="store-map">
          <div id="map"></div>
        </div>
      </div>
    </section>

    <!-- Script -->
    <script
      type="text/javascript"
      src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6f8c3e0da897bea2a828bdaeaf2fd769"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var container = document.getElementById("map");
        var options = {
          center: new kakao.maps.LatLng(36.5, 127.5),
          level: 12,
        };
        var map = new kakao.maps.Map(container, options);

        var storeListElement = document.getElementById("store-items");
        var prevPageBtn = document.getElementById("prevPage");
        var nextPageBtn = document.getElementById("nextPage");
        var currentPageSpan = document.getElementById("currentPage");
        var totalPagesSpan = document.getElementById("totalPages");

        var markers = [];
        var openInfoWindow = null;

        var stores = [
          {
            name: "ì²­ì£¼ ì‚°ë‚¨ë²•ì›ì ",
            lat: 36.6124297590562,
            lng: 127.470104537429,
            address: "ì¶©ë¶ ì²­ì£¼ì‹œ ì„œì›êµ¬ ì›í¥ë¡œ80ë²ˆê¸¸ 23-4 1ì¸µ",
            phone: "043-291-0204",
          },
            {
            name: "ì „ë‚¨ ê³ í¥ì ",
            lat: 34.5257274420941,
            lng: 127.141111503228,
            address: "ì „ë¼ë‚¨ë„ ê³ í¥êµ° ë„ì–‘ì ìš°ì£¼í•­ê³µë¡œ 20",
            phone: "043-266-8883",
          },
          {
            name: "ì²­ì£¼ ì‹ ë´‰ì ",
            lat: 36.655598,
            lng: 127.469437,
            address: "ì¶©ì²­ë¶ë„ ì²­ì£¼ì‹œ í¥ë•êµ¬ ì‹ ë´‰ë™ 163",
            phone: "043-266-8883",
          },
          {
            name: "ì„œìš¸ í™”ê³¡ì ",
            lat: 37.542006,
            lng: 126.83844,
            address: "ì„œìš¸ ê°•ì„œêµ¬ ê°•ì„œë¡œ33ê¸¸ 24 í•´í”¼ë¹Œë”© 101í˜¸",
            phone: "02-2603-9916",
          },
          {
            name: "ê¹€ì²œ ë¶€ê³¡ì ",
            lat: 36.124328,
            lng: 128.091864,
            address: "ê²½ìƒë¶ë„ ê¹€ì²œì‹œ ë¶€ê³¡ë™ 1395",
            phone: "054-436-2111",
          },
          {
            name: "ì¶©ë¶ ëŒ€ì†Œì ",
            lat: 36.975029,
            lng: 127.47264,
            address: "ì¶©ì²­ë¶ë„ ìŒì„±êµ° ëŒ€ì†Œë©´ ëŒ€ë¬¼1ê¸¸ 6-4 1ì¸µ",
            phone: "0507-1380-5886",
          },
          {
            name: "ì¶©ë¶ ë³´ë ¹ì ",
            lat: 36.349906,
            lng: 126.607157,
            address: "ì¶©ë‚¨ ë³´ë ¹ì‹œ í°ì˜¤ë3ê¸¸ 51 1ì¸µ",
            phone: "041-931-0608",
          },
          {
            name: "ì²­ì£¼ ì‚¬ì²œì ",
            lat: 36.664272,
            lng: 127.475386,
            address: "ì¶©ë¶ ì²­ì£¼ì‹œ ì²­ì›êµ¬ ìœ¨ë´‰ë¡œ 43",
            phone: "043-218-8885",
          },
          {
            name: "ì¶©ë¶ ì¦í‰ì ",
            lat: 36.776039,
            lng: 127.567447,
            address: "ì¶©ë¶ ì¦í‰êµ° ì¦í‰ì ì´ˆì¤‘6ê¸¸ 1",
            phone: "043-838-8398",
          },
          {
            name: "ì¶©ë¶ ë³´ì€ì ",
            lat: 36.486059,
            lng: 127.721058,
            address: "ì¶©ë¶ ë³´ì€êµ° ë‚¨ë¶€ë¡œ 4515",
            phone: "043-543-0998",
          },
          {
            name: "ì„¸ì¢… ë³´ëŒì ",
            lat: 36.484134,
            lng: 127.293871,
            address: "ì„¸ì¢… ì‹œì²­ëŒ€ë¡œ 219 ì‹œë“œë‹ˆí•˜íŠ¸ 502í˜¸",
            phone: "044-866-7599",
          },
          {
            name: "ìˆœì²œ ì‚¼ì‚°ì  <strong>(ìƒµì¸ìƒµ)</strong>",
            lat: 34.971286,
            lng: 127.485311,
            address: "ì „ë‚¨ ìˆœì²œì‹œ ì‚¼ì‚°ë¡œ 17 ìˆœì²œë¬¸í™”ì˜ˆìˆ íšŒê´€ ë§Ÿì€í¸",
            phone: "061-753-9825",
          },
          {
            name: "ìˆœì²œ ì‹ ëŒ€ì  <strong>(ìƒµì¸ìƒµ)</strong>",
            lat: 34.932779,
            lng: 127.554942,
            address: "ì „ë‚¨ ìˆœì²œì‹œ í•´ë£¡ë©´ ë§¤ì•ˆë¡œ 69",
            phone: "061-723-9825",
          },
          {
            name: "ìˆœì²œ í’ë•ì  <strong>(ìƒµì¸ìƒµ)</strong>",
            lat: 34.940547,
            lng: 127.505403,
            address: "ì „ë‚¨ ìˆœì²œì‹œ í•˜í’ë™ê¸¸ 34 1ì¸µ",
            phone: "061-741-9825",
          },
          {
            name: "ê²½ë¶ ìƒì£¼ì  <strong>(ìƒµì¸ìƒµ)</strong>",
            lat: 36.405984,
            lng: 128.160395,
            address: "ê²½ë¶ ìƒì£¼ì‹œ ìƒì‚°ë¡œ 169",
            phone: "054-535-1717",
          },
          {
            name: "ì¸ì²œ ì˜¥ë ¨ì ",
            lat: 37.427985,
            lng: 126.649295,
            address: "ì¸ì²œ ì—°ìˆ˜êµ¬ ë…ë°°ë¡œ90ë²ˆê¸¸ 70-4 1ì¸µ",
            phone: "032-859-7770",
          },
          {
            name: "ì¶©ë¶ ë¶„í‰ì  <strong>(ìƒµì¸ìƒµ)</strong>",
            lat: 36.605978,
            lng: 127.486257,
            address: "ì¶©ì²­ë¶ë„ ì²­ì£¼ì‹œ ì„œì›êµ¬ 1ìˆœí™˜ë¡œ 1078 1ì¸µ",
            phone: "043-284-6300",
          },
          {
            name: "ê²½ê¸° ë™ë‘ì²œì ",
            lat: 37.906235,
            lng: 127.064815,
            address: "ê²½ê¸°ë„ ë™ë‘ì²œì‹œ ì¥ê³ ê°¯ë¡œ 126 1ì¸µ",
            phone: "031-858-0048",
          },
          {
            name: "ì¶©ë¶ ìš©ì•”ì ",
            lat: 36.602839,
            lng: 127.514497,
            address: "ì¶©ë¶ ì²­ì£¼ì‹œ ìƒë‹¹êµ¬ ì›”ìš´ë¡œ 70 1ì¸µ",
            phone: "0507-1475-9885",
          },
          {
            name: "ì „ì£¼ ë§Œì„±ì ",
            lat: 35.841665,
            lng: 127.079,
            address: "ì „ë¶ ì „ì£¼ì‹œ ë•ì§„êµ¬ ë§Œì„±ë™ë¡œ 64-3 1ì¸µ",
            phone: "063-214-7740",
          },
        ];

        // í˜ì´ì§€ë„¤ì´ì…˜ ë³€ìˆ˜
        var currentPage = 1;
        var itemsPerPage = 6;
        var totalPages = Math.ceil(stores.length / itemsPerPage);

        totalPagesSpan.textContent = totalPages;

        // ğŸ”¹ [ìˆ˜ì •] í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì „ì²´ ëª©ë¡ì„ ë¹„ìš°ê³  í•„ìš”í•œ ë§Œí¼ë§Œ í‘œì‹œ
        storeListElement.innerHTML = "";

        function renderStoreList() {
          storeListElement.innerHTML = ""; // ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ ì œê±°

          var start = (currentPage - 1) * itemsPerPage;
          var end = start + itemsPerPage;
          var storeSlice = stores.slice(start, end);

          storeSlice.forEach((store, index) => {
            var storeItem = document.createElement("div");
            storeItem.className = "store";
            storeItem.innerHTML = `<h2>${store.name}</h2><p>${store.address}</p>`;
            storeItem.onclick = function () {
              moveToMarker(start + index);
            };
            storeListElement.appendChild(storeItem);
          });

          currentPageSpan.textContent = currentPage;
          prevPageBtn.disabled = currentPage === 1;
          nextPageBtn.disabled = currentPage === totalPages;
        }

        prevPageBtn.addEventListener("click", function () {
          if (currentPage > 1) {
            currentPage--;
            renderStoreList();
          }
        });

        nextPageBtn.addEventListener("click", function () {
          if (currentPage < totalPages) {
            currentPage++;
            renderStoreList();
          }
        });

        stores.forEach((store, index) => {
          var marker = new kakao.maps.Marker({
            position: new kakao.maps.LatLng(store.lat, store.lng),
            map: map,
          });

          var infowindow = new kakao.maps.InfoWindow({
            content: `
          <div class="info-window">
            <strong>${store.name}</strong><br>
            <a href="tel:${store.phone}">ğŸ“ ${store.phone}</a><br>
            <a href="https://map.kakao.com/link/to/${store.address},${store.lat},${store.lng}" target="_blank">ğŸ“ ì°¾ì•„ì˜¤ëŠ” ê¸¸</a>
          </div>
        `,
          });

          kakao.maps.event.addListener(marker, "click", function () {
            if (openInfoWindow) {
              openInfoWindow.close();
              if (openInfoWindow === infowindow) {
                openInfoWindow = null;
                return;
              }
            }
            infowindow.open(map, marker);
            openInfoWindow = infowindow;
          });

          markers.push(marker);
        });

        function moveToMarker(index) {
          var selectedStore = stores[index];
          var moveLatLng = new kakao.maps.LatLng(
            selectedStore.lat,
            selectedStore.lng
          );
          map.setCenter(moveLatLng);
          map.setLevel(5);

          if (openInfoWindow) {
            openInfoWindow.close();
          }

          infowindow.open(map, marker);
          openInfoWindow = infowindow;
        }

        renderStoreList();
      });

      document.addEventListener("DOMContentLoaded", function () {
        const navLinks = document.querySelectorAll(".nav-links a");
        const navbarHeight = document.querySelector(".navbar").offsetHeight;

        navLinks.forEach((link) => {
          link.addEventListener("click", function (event) {
            event.preventDefault();
            const targetId = this.getAttribute("href");
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
              const targetPosition = targetElement.offsetTop - navbarHeight;

              window.scrollTo({
                top: targetPosition,
                behavior: "smooth",
              });
            }
          });
        });
      });
    </script>
  </body>
</html>
